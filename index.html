<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sprachlern-App</title>

  <link rel="stylesheet" href="./assets/css/app.css?v=800" />
   <link rel="stylesheet" href="./assets/css/overrides.css?v=800" />
</head> 
<body>
  <div id="app">
    <header class="topbar">
      <h1>Sprachlern-App</h1>

      <nav id="menu">
        <button id="teacherBtn" class="teacher-btn" type="button">üîí Lehrkraft</button>
        <button id="resetTeacherBtn" type="button">üßπ Reset Lehrmodus</button>
      </nav>
    </header>

    <main id="view">
      <p class="muted">Lade Inhalte‚Ä¶</p>
    </main>

    <script>
      // Hard reset, unabh√§ngig von app.js
      document.getElementById("resetTeacherBtn").onclick = () => {
        localStorage.removeItem("teacher_mode_v1");
        alert("Lehrmodus zur√ºckgesetzt. Seite l√§dt neu.");
        location.reload();
      };
    </script>

    <!-- App-Start (Cache-Buster ist sinnvoll) -->
  <script>
  // Zeigt JS-Fehler direkt im Bereich #view an (ohne DevTools)
  window.addEventListener("error", (e) => {
    const view = document.getElementById("view");
    if (!view) return;
    const msg = [
      "JS-Fehler:",
      e.message || "(keine message)",
      e.filename ? `Datei: ${e.filename}` : "",
      e.lineno ? `Zeile: ${e.lineno}` : "",
      e.colno ? `Spalte: ${e.colno}` : ""
    ].filter(Boolean).join("\n");
    view.innerHTML = `<pre class="card" style="white-space:pre-wrap">${msg}</pre>`;
  });

  window.addEventListener("unhandledrejection", (e) => {
    const view = document.getElementById("view");
    if (!view) return;
    view.innerHTML = `<pre class="card" style="white-space:pre-wrap">Promise-Fehler:\n${String(e.reason || e)}</pre>`;
  });

  // Mini-Hinweis, dass dieser Block aktiv ist
  window.addEventListener("DOMContentLoaded", () => {
    const view = document.getElementById("view");
    if (view) view.insertAdjacentHTML("beforeend", `<p class="muted">Debug aktiv‚Ä¶</p>`);
  });
</script> 
<script>
  // Zeigt JS-Fehler direkt im Bereich #view an (ohne DevTools)
  window.addEventListener("error", (e) => {
    const view = document.getElementById("view");
    if (!view) return;
    const msg = [
      "JS-Fehler:",
      e.message || "(keine message)",
      e.filename ? `Datei: ${e.filename}` : "",
      e.lineno ? `Zeile: ${e.lineno}` : "",
      e.colno ? `Spalte: ${e.colno}` : ""
    ].filter(Boolean).join("\n");
    view.innerHTML = `<pre class="card" style="white-space:pre-wrap">${msg}</pre>`;
  });

  window.addEventListener("unhandledrejection", (e) => {
    const view = document.getElementById("view");
    if (!view) return;
    view.innerHTML = `<pre class="card" style="white-space:pre-wrap">Promise-Fehler:\n${String(e.reason || e)}</pre>`;
  });

  window.addEventListener("DOMContentLoaded", () => {
    const view = document.getElementById("view");
    if (view) view.insertAdjacentHTML("beforeend", `<p class="muted">Debug aktiv‚Ä¶</p>`);
  });
</script>

<!-- NEU: Import-Test -->
<script type="module">
(async () => {
  const view = document.getElementById("view");
  try {
    view.insertAdjacentHTML("beforeend", "<p class='muted'>Import-Test: practice_vocab.js ‚Ä¶</p>");
    await import("./src/practice_vocab.js?v=2000");
    view.insertAdjacentHTML("beforeend", "<p class='muted'>‚úÖ practice_vocab.js OK</p>");
  } catch (e) {
    view.innerHTML = `<pre class="card" style="white-space:pre-wrap">‚ùå Import-Fehler practice_vocab.js:\n${String(e && e.message || e)}</pre>`;
  }
})();
</script>
  
    <script type="module" src="src/app.js?v=1001"></script>
  </div>
</body>
</html>
